(function(a,b){function p(c,d,e){var f=2;c.find(".creative_layer div").each(function(c){var e=a(this);if(e.data("_top")==b)e.data("_top",parseInt(e.css("top"),0));if(e.data("_left")==b)e.data("_left",parseInt(e.css("left"),0));if(e.data("_op")==b){e.data("_op",e.css("opacity"))}e.css({"z-index":1200});if(e.hasClass("fadeup")){e.animate({top:e.data("_top")+20+"px",opacity:0},{duration:0,queue:false}).delay(d+(f+1)*350).animate({top:e.data("_top")+"px",opacity:e.data("_op")},{duration:500,queue:true});f++}if(e.hasClass("faderight")){e.animate({left:e.data("_left")-20+"px",opacity:0},{duration:0,queue:false}).delay(d+(f+1)*350).animate({left:e.data("_left")+"px",opacity:e.data("_op")},{duration:500,queue:true});f++}if(e.hasClass("fadedown")){e.animate({top:e.data("_top")-20+"px",opacity:0},{duration:0,queue:false}).delay(d+(f+1)*350).animate({top:e.data("_top")+"px",opacity:e.data("_op")},{duration:500,queue:true});f++}if(e.hasClass("fadeleft")){e.animate({left:e.data("_left")+20+"px",opacity:0},{duration:0,queue:false}).delay(d+(f+1)*350).animate({left:e.data("_left")+"px",opacity:e.data("_op")},{duration:500,queue:true});f++}if(e.hasClass("fade")){e.animate({opacity:0},{duration:0,queue:false}).delay(d+(f+1)*350).animate({opacity:e.data("_op")},{duration:500,queue:true});f++}if(e.hasClass("wipeup")||e.hasClass("wipedown")||e.hasClass("wipeleft")||e.hasClass("wiperight")){e.animate({opacity:0},{duration:0,queue:false});setTimeout(function(){if(e.find(".wipermode").length==0){var a=e.outerWidth();var b=e.outerHeight();var c={color:e.css("backgroundColor"),border:e.css("border"),borderradiusmoz:e.css("-moz-border-radius-topleft"),borderradiusweb:e.css("-webkit-border-top-left-radius"),borderradius:e.css("borderTopLeftRadius"),boxmoz:e.css("-moz-box-shadow"),boxweb:e.css("-webkit-box-shadow"),box:e.css("box-shadow"),padtop:"0px",padleft:"0px",paddingT:parseInt(e.css("paddingTop"),0),paddingB:parseInt(e.css("paddingBottom"),0),paddingL:parseInt(e.css("paddingLeft"),0),paddingR:parseInt(e.css("paddingRight"),0),ww:a+30,hh:b+20};e.data("params",c);e.wrapInner('<div style="position:absolute;overflow:hidden;width:'+(a-(c.paddingL+c.paddingR))+"px;height:"+(b-(c.paddingT+c.paddingB))+'px;"><div class="wipermode-origin" style="top:0px;left:0px;position:absolute;width:'+a+"px;height:"+b+'px;"></div></div>');e.prepend('<div class="wipermode" style="width:'+a+"px;height:"+b+"px;background-color:"+c.color+";top:0px;left:0px;position:absolute;border-radius:"+c.borderradius+";-moz-border-radius:"+c.borderradiusmoz+";-webkit-border-radius:"+c.borderradiusweb+";-moz-box-shadow:"+c.boxmoz+";-webkit-box-shadow:"+c.boxweb+";box-shadow:"+c.box+';"></div>');e.css({background:"none"})}var c=e.data("params");e.stop(true,true).find(".wipermode-origin");e.stop(true,true);e.find(".wipermode").stop(true,true);if(e.hasClass("wipeup")){e.find(".wipermode-origin").css({top:-1*c.hh+"px",left:c.padleft});e.find(".wipermode").css({top:c.hh+"px"})}else{if(e.hasClass("wipedown")){e.find(".wipermode-origin").css({top:c.hh+"px",left:c.padleft});e.find(".wipermode").css({top:-1*c.hh+"px"})}else{if(e.hasClass("wipeleft")){e.find(".wipermode-origin").css({top:c.padtop,left:-1*c.ww+"px"});e.find(".wipermode").css({left:c.ww+"px"})}else{e.find(".wipermode-origin").css({top:c.padtop,left:c.ww+"px"});e.find(".wipermode").css({left:-1*c.ww+"px"})}}}e.animate({opacity:"1.0"},{duration:300,queue:false});e.find(".wipermode-origin").animate({top:c.padtop,left:c.padleft},{duration:500,easing:"easeOutSine",queue:false});e.find(".wipermode").animate({top:"0px",left:"0px"},{duration:500,easing:"easeOutExpo",queue:false})},d+(f+1)*350);f++}if(e.hasClass("masklesswipeup")||e.hasClass("masklesswipedown")||e.hasClass("masklesswipeleft")||e.hasClass("masklesswiperight")){e.animate({opacity:0},{duration:0,queue:false});setTimeout(function(){if(e.find(".masklesswipemode").length==0){var a=e.outerWidth();var b=e.outerHeight();var c={color:e.css("backgroundColor"),border:e.css("border"),borderradiusmoz:e.css("-moz-border-radius-topleft"),borderradiusweb:e.css("-webkit-border-top-left-radius"),borderradius:e.css("borderTopLeftRadius"),boxmoz:e.css("-moz-box-shadow"),boxweb:e.css("-webkit-box-shadow"),box:e.css("box-shadow"),padtop:e.css("paddingTop"),padleft:e.css("paddingLeft")};e.data("params",c);e.wrapInner('<div class="masklesswipemode-origin" style="top:0px;left:0px;position:absolute;width:'+a+"px;height:"+b+'px;"></div>');e.prepend('<div class="masklesswipemode" style="width:'+a+"px;height:"+b+"px;background-color:"+c.color+";top:0px;left:0px;position:absolute;border-radius:"+c.borderradius+";-moz-border-radius:"+c.borderradiusmoz+";-webkit-border-radius:"+c.borderradiusweb+";-moz-box-shadow:"+c.boxmoz+";-webkit-box-shadow:"+c.boxweb+";box-shadow:"+c.box+';"></div>');e.css({background:"none"})}var c=e.data("params");e.stop(true,true).find(".masklesswipemode-origin");e.stop(true,true);e.find(".masklesswipemode").stop(true,true);var d=50;if(e.hasClass("wipeup")){e.find(".masklesswipemode-origin").css({top:-1*d+"px",left:c.padleft});e.find(".masklesswipemode").css({top:d+"px"})}else{if(e.hasClass("masklesswipedown")){e.find(".masklesswipemode-origin").css({top:d+"px",left:c.padleft});e.find(".masklesswipemode").css({top:-1*d+"px"})}else{if(e.hasClass("masklesswipeleft")){e.find(".masklesswipemode-origin").css({top:c.padtop,left:-1*d+"px"});e.find(".masklesswipemode").css({left:d+"px"})}else{e.find(".masklesswipemode-origin").css({top:c.padtop,left:d+"px"});e.find(".masklesswipemode").css({left:-1*d+"px"})}}}e.animate({opacity:"1.0"},{duration:800,queue:false});e.find(".masklesswipemode-origin").animate({top:c.padtop,left:c.padleft},{duration:800,easing:"easeInExpo",queue:false});e.find(".masklesswipemode").animate({top:"0px",left:"0px"},{duration:800,easing:"easeOutExpo",queue:false})},d+(f+1)*350);f++}})}function o(c,d){d.cd=0;if(d.thumbStyle=="image"||d.thumbStyle=="both"||d.thumbStyle=="thumb"){if(a.browser.msie)c.find(".kenburn_thumb_container #thumbmask .thumbsslide").cssAnimate({left:"0px"},{duration:300,queue:false});else c.find(".kenburn_thumb_container #thumbmask .thumbsslide").animate({left:"0px"},{duration:300,queue:false});var e=c.find(".kenburn_thumb_container #thumbmask");var f=e.find(".thumbsslide");var g=c.find(".slide_mainmask");setInterval(function(){if(d.loaded==1){var b=c.data("currentSlide");var h=c.data("currentThumb");if(!e.hasClass("overme")&&!g.hasClass("overme")&&!g.hasClass("videoon")){d.cd=d.cd+1;var i=Math.floor(d.thumbWidth*(d.cd/d.timer));if(a.browser.msie){h.find("img").animate({left:0-i+"px"},{duration:10,queue:false});h.animate({left:i+"px"},{duration:10,queue:false})}else{h.find("img").cssAnimate({left:0-i+"px"},{duration:10,queue:false});h.cssAnimate({left:i+"px"},{duration:10,queue:false})}if(d.cd==d.timer){d.cd=0;f.find(".kenburn-thumbs").each(function(){var b=a(this);if(a.browser.msie){b.stop();b.find("img").stop(true,true)}else{b.cssStop(true,true);b.find("img").cssStop(true,true)}b.find("img").css({left:"0px"});f.css({left:"0px"})});if(b.index()<d.maxitem-1){var j=c.find("ul li:eq("+(b.index()+1)+")");m(b,j,c,d);var k=0-parseInt(h.parent().css("left"),0);f.css({position:"absolute"});if(Math.abs(k)<=c.data("thumbnailmaxdif")){if(a.browser.msie)f.animate({left:k+"px"},{duration:300,queue:false});else f.cssAnimate({left:k+"px"},{duration:300,queue:false})}else{k=0-c.data("thumbnailmaxdif");if(a.browser.msie)f.animate({left:k+"px"},{duration:300,queue:false});else f.cssAnimate({left:k+"px"},{duration:300,queue:false})}}else{m(b,c.find("ul li:first"),c,d);if(a.browser.msie)f.animate({left:"0px"},{duration:300,queue:false});else f.cssAnimate({left:"0px"},{duration:300,queue:false})}}}}},100)}else{var g=c.find(".slide_mainmask");setInterval(function(){if(d.loaded==1){var e=c.data("currentSlide");var h=c.data("currentThumb");if(!g.hasClass("overme")&&!g.hasClass("videoon")){d.cd=d.cd+1;if(d.cd==d.timer){d.cd=0;if(e.index()<d.maxitem-1){var i=c.find("ul li:eq("+(e.index()+1)+")");m(e,i,c,d);if(d.thumbStyle!="none"){var j=0-parseInt(h.parent().css("left"),0);if(f!=null&&f!=b){f.css({position:"absolute"});if(Math.abs(j)<=c.data("thumbnailmaxdif")){if(a.browser.msie)f.animate({left:j+"px"},{duration:300,queue:false});else f.cssAnimate({left:j+"px"},{duration:300,queue:false})}else{j=0-c.data("thumbnailmaxdif");if(a.browser.msie)f.animate({left:j+"px"},{duration:300,queue:false});else f.cssAnimate({left:j+"px"},{duration:300,queue:false})}}}}else{m(e,c.find("ul li:first"),c,d);if(f!=null&&f!=b){if(a.browser.msie)f.animate({left:"0px"},{duration:300,queue:false});else f.cssAnimate({left:"0px"},{duration:300,queue:false})}}}}}},100)}}function n(){var a=document.createElement("canvas");return!!(a.getContext&&a.getContext("2d"))}function m(c,d,e,f){var g=false;e.find("ul >li").each(function(b){var e=a(this);if(e.index()!=c.index()&&e.index()!=d.index()){e.css({display:"none",position:"absolute",left:"0px","z-index":"994"})}});var h=e.find(".slide_mainmask .video_container");setTimeout(function(){h.remove()},600);var i=e.find(".slide_mainmask");i.removeClass("videoon");c.css({position:"absolute",top:"0px",left:"0px","z-index":"900"});d.css({position:"absolute",top:"0px",left:"0px","z-index":"1000"});d.css({display:"block"});var j=d.find("img:first");var k=d.find(".bw-main-image");if(d.data("ww")==b){var m=d.find("img").width();var o=d.find("img").height();if(m!=0){if(j.width()>0&&j.width()<f.width){var q=f.width/m;m=m*q;o=o*q}if(j.height()>0&&j.height()<f.height){var q=f.height/o;m=m*q;o=o*q}d.data("ww",m);d.data("hh",o)}}else{var m=d.data("ww");var o=d.data("hh")}var r=0;var s=0;var t=0;var u=0;var v=d.data("startalign");var w=d.data("endalign");if(v=="random")v=l();if(w=="random")w=l();if(v!=b){var x=v;var y=x.split(",")[0];var z=x.split(",")[1];if(y=="left")s=0;else if(y=="center")s=f.width/2-m/2;else if(y=="right")s=0-Math.abs(f.width-m);if(z=="top")r=0;else if(z=="center")r=f.height/2-o/2;else if(z=="bottom")r=0-Math.abs(f.height-o)}if(w!=b){var A=w;var y=A.split(",")[0];var z=A.split(",")[1];if(y=="left")u=0;else if(y=="center")u=f.width/2-m/2;else if(y=="right")u=0-Math.abs(f.width-m);if(z=="top")t=0;else if(z=="center")t=f.height/2-o/2;else if(z=="bottom")t=0-Math.abs(f.height-o)}clearInterval(c.data("interval"));j.parent().find(".canvas-now").remove();j.parent().find(".canvas-now-bw").remove();var B=n();var C=a.browser.msie&&a.browser.version<9;if(C)B=false;if(B){j.parent().append('<div style="position:absolute;z-index:1" class="canvas-now"><canvas class="canvas-now-canvas" width="'+m+'" height="'+o+'"></canvas></div>');j.css({display:"none"});var D=j.parent().find(".canvas-now-canvas")[0];var E=D.getContext("2d");if(k.length>0){j.parent().append('<div style="position:absolute;z-index:20" class="canvas-now-bw"><canvas class="canvas-now-canvas-bw" width="'+m+'" height="'+o+'"></canvas></div>');k.css({display:"none"});var F=j.parent().find(".canvas-now-canvas-bw")[0];var G=F.getContext("2d")}}else{}var H=d.data("panduration");var I=0;var J=0;var K=m;var L=o;var M=d.data("zoomfact");var N=d.data("zoom");if(N=="random"){if(Math.floor(Math.random()*2)==0)N="out";else N="in"}if(d.data("zoomfact")=="random"){M=Math.random()*1+1}if(N=="out"){K=K*M;L=L*M;s=s*M;r=r*M}var O=(u-s)/(H*25);var P=(t-r)/(H*25);var Q=1/(H*25);I=m*M/(H*25)/10;J=o*M/(H*25)/10;if(N=="out"){I=I*-1;J=J*-1}if(d.data("endalign")!=b){var A=d.data("endalign");var y=A.split(",")[0];var z=A.split(",")[1];if(y=="left")O=O+I/4;else if(y=="center")O=O-I/2;else if(y=="right")O=O-I;if(z=="top")P=P+J/4;else if(z=="center")P=P-J/2;else if(z=="bottom")P=P-J}if(f.timer>parseInt(d.data("panduration"),0)*10){f.timer=parseInt(d.data("panduration"),0)*10}else{f.timer=f.savedTimer*10}if(B){E.drawImage(j[0],s,r,K,L);if(k.length>0){G.drawImage(k[0],s,r,K,L);setTimeout(function(){j.parent().find(".canvas-now-bw").cssAnimate({opacity:"0.0"},{duration:d.data("colortransition")*1e3,queue:false})},500)}}j.cssStop(true,true);k.cssStop(true,true);j.css({position:"absolute",left:s+"px",top:r+"px",width:K+"px",height:L+"px",opacity:1});k.css({position:"absolute",left:s+"px",top:r+"px",width:K+"px",height:L+"px",opacity:1});var R=s;var S=r;var T=K;step=0;d.data("interval",setInterval(function(){if(!e.parent().parent().find(".kenburn_thumb_container #thumbmask").hasClass("overme")&&!e.find(".slide_mainmask").hasClass("overme")&&!e.find(".slide_mainmask").hasClass("videoon")){K=K+I;L=L+J;s=s+O;r=r+P;if(s>0)s=0;if(r>0)r=0;if(s<f.width-K)s=f.width-K;if(r<f.height-L)r=f.height-L;if(B){E.drawImage(j[0],s,r,K,L);if(k.length>0)G.drawImage(k[0],s,r,K,L)}else{var a=K/T;var b=s-R;var c=r-S;if(jQuery.browser.msie){j.css({filter:'progid:DXImageTransform.Microsoft.Matrix(FilterType="bilinear",M11='+a+",M12=0,M21=0,M22="+a+",Dx="+b+",Dy="+c+")"});j.css({"-ms-filter":'progid:DXImageTransform.Microsoft.Matrix(FilterType="bilinear",M11='+a+",M12=0,M21=0,M22="+a+",Dx="+b+",Dy="+c+")"});k.remove()}else{j.cssAnimate({left:s+"px",top:r+"px",width:K+"px",height:L+"px"},{duration:38,easing:"linear",queue:false});if(k.length>0&&k.css("opacity")>0){k.cssAnimate({left:s+"px",top:r+"px",width:K+"px",height:L+"px"},{duration:38,easing:"linear",queue:false});k.css({opacity:k.css("opacity")-Q})}}}}},40));if(d.data("transition")=="slide"){if(g==false){var U=true;if(c.index()>d.index())U=false;if(U){h.animate({left:0-f.width+"px"},{duration:600,queue:false});d.find(".slide_container").stop(true,true);d.find(".slide_container").css({opacity:"1.0",left:f.width+"px"});c.find(".slide_container").animate({left:0-f.width+"px"},{duration:600,queue:false});d.find(".slide_container").animate({left:"0px",top:"0px",opacity:"1.0"},{duration:600,queue:false})}else{h.animate({left:f.width+"px"},{duration:600,queue:false});d.find(".slide_container").stop(true,true);d.find(".slide_container").css({opacity:"1.0",position:"absolute",top:"0px",left:0-f.width+"px"});c.find(".slide_container").animate({left:f.width+"px"},{duration:600,queue:false});d.find(".slide_container").animate({left:"0px",top:"0px",opacity:"1.0"},{duration:600,queue:false})}}}else{c.find(".slide_container").stop(true,true);c.find(".slide_container").animate({opacity:"0"},{duration:600,queue:false});h.animate({opacity:"0.0"},{duration:600,queue:false});d.find(".slide_container").stop(true,true);d.find(".slide_container").css({opacity:"0.0",left:"0px",top:"0px"});d.find(".slide_container").animate({opacity:"1.0"},{duration:600,queue:false})}if(e.find(".kenburn_thumb_container").length>0){var V=e.find(".kenburn_thumb_container #thumbmask .thumbsslide #thumb"+d.index()+" #over");e.find(".kenburn_thumb_container #thumbmask .thumbsslide #thumb"+c.index()).each(function(b){var c=a(this);if(c.attr("id")!="thumb"+d.index()){c.removeClass("selected");var e=c.find("#over");e.stop();e.css({position:"absolute",opacity:"0.0"});setTimeout(function(){e.find("img").css({position:"absolute",left:"0px"})},30);if(a.browser.msie){e.animate({left:"0px",height:f.thumbHeight+"px",width:f.thumbWidth+"px"},{duration:1,queue:false})}else{e.cssAnimate({left:"0px",height:f.thumbHeight+"px",width:f.thumbWidth+"px"},{duration:1,queue:false})}if(a.browser.msie&&a.browser.version>7&&a.browser.version<9)e.css({display:"none"})}});V.parent().addClass("selected");V.animate({opacity:"1.0"},{duration:300,queue:false});if(a.browser.msie&&a.browser.version>7&&a.browser.version<9)V.css({display:"block"});e.data("currentThumb",V)}if(e.find(".minithumb").length>0){var V=e.find("#minithumb"+d.index());e.find(".minithumb").removeClass("selected");V.addClass("selected");if(f.thumbStyle!="both")e.data("currentThumb",V)}e.data("currentSlide",d);p(d,100,e);f.cd=0}function l(){var a="";var b=Math.floor(Math.random()*3);var c=Math.floor(Math.random()*3);if(b==0)a="left";else if(b==1)a="center";else a="right";if(c==0)a=a+",top";else if(c==1)a=a+",center";else a=a+",bottom";return a}function k(b,c){var d=b.find(".slide_mainmask");d.data("maxwidth",c.width+c.padleft+c.padright);d.data("maxheight",c.height+c.padtop+c.padbottom);d.data("pdistance",c.parallaxX);d.data("pdistancey",c.parallaxY);d.data("cdistance",c.captionParallaxX);d.data("cdistancey",c.captionParallaxY);d.data("opt",c);a("body").append('<div id="mpinfo" style="z-index:1000000;background-color:#fff;position:absolute;top:10px;left:10px;font-size:15px"></div>');var e=d.parent().data("currentSlide");var f=d.find(".parallax_container");var g=e.find(".layer_container");d.mouseenter(function(b){var c=a(this);var d=c.parent().find(".kenburn_thumb_container #thumbmask");var e=c.parent().data("currentSlide");var f=e.find(".parallax_container");var g=e.find(".layer_container");c.addClass("overon")});d.mouseleave(function(b){var c=a(this);var d=c.parent().data("currentSlide");var e=d.find(".parallax_container");var f=d.find(".layer_container");c.removeClass("overme");c.addClass("overon")});d.mousemove(function(b){var d=a(this);if(c.pauseOnRollOverMain!="off")d.addClass("overme");var e=d.parent().find(".kenburn_thumb_container #thumbmask");if(!e.hasClass("overme")&&!d.hasClass("overon")){var f=d.parent().data("currentSlide");var g=f.find(".parallax_container");var h=f.find(".layer_container")}else{setTimeout(function(){d.removeClass("overon")},100)}})}function j(b,c){if(a.browser.msie){b.find(".kenburn-preloader").animate({opacity:"0.0"},{duration:300,queue:false})}else{b.find(".kenburn-preloader").cssAnimate({opacity:"0.0"},{duration:300,queue:false})}setTimeout(function(){b.find(".kenburn-preloader").remove()},300);var d=b.find("ul li:first");m(d,d,b,c);k(b,c);c.loaded=1}function i(b,c){var d=b.find("ul >li").length;var e=c.width+c.padleft+c.padright;b.append('<div class="thumbbuttons"><div class="grainme"><div class="leftarrow"></div><div class="thumbs"></div><div class="rightarrow"></div></div></div>');var f=b.find(".leftarrow");var g=b.find(".rightarrow");g.click(function(){var a=b.data("currentSlide");if(a.index()<c.maxitem-1){var d=b.find("ul li:eq("+(a.index()+1)+")")}else{var d=b.find("ul li:first")}m(a,d,b,c)});f.click(function(){var a=b.data("currentSlide");if(a.index()>0){var d=b.find("ul li:eq("+(a.index()-1)+")")}else{var d=b.find("ul li:eq("+(c.maxitem-1)+")")}m(a,d,b,c)});var h=b.find(".thumbs");b.find("ul >li").each(function(d){var e=a(this);var f=a('<div class="minithumb" id="minithumb'+d+'"></div>');f.data("id",d);h.append(f);f.click(function(){var d=a(this);if(!d.hasClass("selected")){var e=b.find("ul li:eq("+d.data("id")+")");m(b.data("currentSlide"),e,b,c)}})});h.waitForImages(function(){var a=parseInt(h.parent().parent().css("top"),0);h.parent().parent().css({top:a+c.bulletYOffset+"px",left:e/2-parseInt(h.parent().width(),0)/2+c.bulletXOffset+"px"})})}function h(b,c){var d=b.find("ul >li").length;if(d<c.thumbAmount)c.thumbAmount=d;var e=c.thumbAmount*c.thumbWidth+(c.thumbAmount-1)*c.thumbSpaces;var f=c.thumbHeight;var g=e-c.thumbSpaces+2*c.thumbPadding;var h=f+c.thumbPadding;var i=c.width+c.padleft+c.padright;var j=Math.round(i/2-g/2);var k=d*c.thumbWidth+(d-1)*c.thumbSpaces;b.append('<div class="kenburn_thumb_container" style="position:absolute;left:'+j+"px;top:"+(1+c.height+c.padtop+c.padbottom)+"px;width:"+(g+2)+"px;height:"+(h+2)+'px;"></div>');var l=b.find(".kenburn_thumb_container");if(c.thumbAmount==0)l.css({visibility:"hidden"});l.append('<div class="kenburn_thumb_container_bg" style="position:absolute;left:1px;top:0px;width:'+g+"px;height:"+h+'px"></div>');l.find(".kenburn_thumb_container_bg").append('<div class="kenburn-repeatshadow" style="top:0px;left:'+ -2+"px;width:"+(g+4)+'px"></div>');l.append('<div id="thumbmask" style="overflow:hidden;position:absolute;top:0px;left:'+(c.thumbPadding+1)+"px; width:"+(e-c.thumbSpaces)+"px;\theight:"+c.thumbHeight+'px;overflow:hidden;"></div>');var n=l.find("#thumbmask");n.append('<div class="thumbsslide" style="width:'+k+'px"></div>');var o=n.find(".thumbsslide");b.find("ul >li").each(function(e){var f=a(this);var g=f.find("img:first");var h=g.data("thumb_bw");var i=g.data("thumb");var j=f.find(".slide_container").data("video")==1;var k=a('<div class="kenburn-thumbs" id="thumb'+e+'" style="cursor:pointer;position:absolute;top:0px;left:'+(e*c.thumbWidth+(e-1)*c.thumbSpaces)+"px;width:"+c.thumbWidth+"px;height:"+c.thumbHeight+"px;background:url("+h+');"></div>');k.data("id",e);if(e==d)k.css({"margin-right":"0px"});o.append(k);var l=a('<div id="over" style="cursor:pointer"><img id="over_img" src="'+i+'"></div>');k.append(l);var n=k.find("#over");n.css({opacity:"0.0"});if(a.browser.msie&&a.browser.version>7&&a.browser.version<9){n.css({display:"none"})}n.css({overflow:"hidden",position:"absolute",left:"0px",opacity:"0.0",height:c.thumbHeight+"px",width:c.thumbWidth+"px"});n.find("img").css({position:"absolute",left:"0px"});if(a.browser.msie){n.animate({left:"0px",opacity:"0.0",height:c.thumbHeight+"px",width:c.thumbWidth+"px"},{duration:50,queue:false});n.find("img").animate({left:"0px"},{duration:50,queue:false})}else{n.cssAnimate({left:"0px",opacity:"0.0",height:c.thumbHeight+"px",width:c.thumbWidth+"px"},{duration:50,queue:false});n.find("img").cssAnimate({left:"0px"},{duration:50,queue:false})}if(j){var p=a('<div class="video"></div>');k.append(p);k.find(".video").css({position:"absolute",top:c.thumbHeight/2+"px",left:c.thumbWidth/2+"px","z-index":"1000"})}if(c.shadow=="true"||c.shadow==true||c.shadow=="on"){var q=a('<div class="kenburn-repeatshadow" style="position:relative;margin-left:0px;width:'+c.thumbWidth+'px;"></div>');k.append(q)}var r=o.find("#thumb"+e);r.hover(function(){var b=a(this).find("#over");if(!b.parent().hasClass("selected")){if(a.browser.msie){if(a.browser.msie&&a.browser.version>7&&a.browser.version<9)b.css({display:"block"});else b.animate({opacity:"1.0"},{duration:300,queue:false})}else{b.css({left:"0px",display:"block"});b.find("img").css({display:"block",opacity:"1.0",left:"0px"});b.cssAnimate({opacity:"1.0"},{duration:300,queue:false})}}},function(){var b=a(this).find("#over");if(!b.parent().hasClass("selected")){if(a.browser.msie){if(a.browser.msie&&a.browser.version>7&&a.browser.version<9)b.css({display:"none"});else b.animate({opacity:"0"},{duration:300,queue:false})}else{b.cssAnimate({opacity:"0.0"},{duration:300,queue:false})}}});r.click(function(){var d=a(this);if(!d.hasClass("selected")){var e=b.find("ul li:eq("+d.data("id")+")");m(b.data("currentSlide"),e,b,c)}})});if(e<k){a(document).mousemove(function(b){a("body").data("mousex",b.pageX)});var p=k-e;b.data("thumbnailmaxdif",p);var q=p/(e-c.thumbWidth);n.data("steps",q);n.data("thw",c.thumbWidth);n.data("maxw",p);n.mouseenter(function(){var b=a(this);if(c.pauseOnRollOverThumbs!="off")b.addClass("overme");var d=b.offset();var e=a("body").data("mousex")-d.left;e=e-b.data("thw")/2;var f=b.data("steps");var g=0-f*e;if(g>0)g=0;if(g<0-p)g=0-p;if(c.pauseOnRollOverMain!="off")b.addClass("overon");b.find(".thumbsslide").css({position:"absolute"});if(a.browser.msie)b.find(".thumbsslide").animate({left:g+"px"},{duration:200,queue:false});else b.find(".thumbsslide").cssAnimate({left:g+"px"},{duration:200,queue:false})});n.mousemove(function(){var b=a(this);if(c.pauseOnRollOverThumbs!="off")b.addClass("overme");var d=b.offset();var e=a("body").data("mousex")-d.left;e=e-b.data("thw")/2;var f=b.data("steps");var g=0-f*e;if(g>0)g=0;if(g<0-p)g=0-p;if(!b.hasClass("overon")){b.find(".thumbsslide").css({position:"absolute"});if(a.browser.msie)b.find(".thumbsslide").animate({left:g+"px"},{duration:0,queue:false});else b.find(".thumbsslide").cssAnimate({left:g+"px"},{duration:0,queue:false})}else{setTimeout(function(){b.removeClass("overon")},100)}});n.mouseout(function(){var b=a(this);b.removeClass("overme")})}if(c.thumbAmount==0||c.thumbStyle=="none"){l.css({visibility:"hidden"});b.css({width:i+"px"})}else{b.css({width:i+"px",height:c.height+h+"px"})}}function g(b,c){if(c.shadow=="true"||c.shadow==true||c.shadow=="on"){var d=c.width+c.padleft+c.padright;var e=d/2;if(e>50)e=50;d=d-2*e;var f=a('<div class="kenburn-leftshadow" style="top:'+(1+c.height+c.padtop+c.padbottom)+"px;left:0px;width:"+e+'px"></div>');var g=a('<div class="kenburn-rightshadow" style="top:'+(1+c.height+c.padtop+c.padbottom)+'px"></div>');var h=a('<div class="kenburn-repeatshadow" style="top:'+(1+c.height+c.padtop+c.padbottom)+"px;left:"+e+"px;width:"+d+'px"></div>');b.append(f);b.append(h);b.append(g)}else{var i=b.find(".kenburn_thumb_container")}}function f(a,b){a.append('<div class="kenburn-bg" style="z-index:7;position:absolute;top:0px;left:0px;width:'+b.width+"px;height:"+b.height+'px;overflow:hidden"></div>');var c=a.find(".kenburn-bg");b.padtop=parseInt(c.css("paddingTop"),0);b.padleft=parseInt(c.css("paddingLeft"),0);b.padright=parseInt(c.css("paddingRight"),0);b.padbottom=parseInt(c.css("paddingBottom"),0)}function e(c,d,e){c.find("ul >li").each(function(f){if(f==e){var g=a(this);g.find(".creative_layer").wrap('<div class="layer_container" style="position:absolute;left:0px;top:0px;width:'+d.width+"px;height:"+d.height+'px"></div>');g.wrapInner('<div class="slide_container" style="z-index:10;position:absolute;top:0px;left:0px;width:'+d.width+"px;height:"+d.height+'px;overflow:hidden"><div class="parallax_container" style="position:absolute;top:0pxleft:0px"><div class="kb_container"></div></div></div>');var h=a.browser.msie&&a.browser.version<9;if(g.find("img:first").data("bw")!=b&&g.find("img:first").data("bw").length>0&&!h)g.find(".kb_container").append('<img class="bw-main-image" src="'+g.find("img:first").data("bw")+'" style="position:absolute;top:0px;left:0px">');g.find("img:first").attr("src",g.find("img:first").data("src"));g.find(".slide_container").css({opacity:"0.0"});g.find(".slide_container .parallax_container .kb_container .video_container").each(function(){var b=a(this);b.closest(".slide_container").append('<div class="kenburn-video-overlay"></div>');b.closest(".slide_container").append('<div class="kenburn-video-button"></div>');b.closest(".slide_container").data("video",1);var e=b.closest(".slide_container").parent().find(".kenburn-video-button");var f=b.closest(".slide_container").parent().find(".kenburn-video-overlay");var g=parseInt(e.css("width"),0);var h=parseInt(e.css("height"),0);var i=parseInt(b.closest(".slide_container").css("width"),0);var j=parseInt(b.closest(".slide_container").css("height"),0);e.css({left:i/2-g/2+"px",top:j/2-h/2+"px"});e.data("top",c);e.data("url",b.html());b.remove();f.data("origopa",f.css("opacity"));e.hover(function(){var b=a(this);var c=b.parent().find(".kenburn-video-overlay");if(a.browser.msie)c.animate({opacity:"0.5"},{duration:100});else c.cssAnimate({opacity:"0.5"},{duration:100});if(a.browser.version>7&&a.browser.version<9){c.css({display:"block"})}},function(){var b=a(this);var c=b.parent().find(".kenburn-video-overlay");if(a.browser.msie)c.animate({opacity:c.data("origopa")},{duration:100});else c.cssAnimate({opacity:c.data("origopa")},{duration:100});if(a.browser.msie&&a.browser.version>7&&a.browser.version<9){c.css({display:"none"})}});e.click(function(){var b=a(this);var c=b.data("top");var e=c.find(".slide_mainmask");e.addClass("videoon");c.data("currentSlide").animate({top:d.height+"px"},{duration:500,queue:false});c.find(".slide_mainmask").append('<div class="video_container" style="z-index:9999;width:'+d.width+"px;height:"+d.height+'px">'+b.data("url")+"</div>");var f=c.find(".slide_mainmask .video_container");f.css({top:0-d.height+"px"});f.animate({top:"0px"},{duration:500,queue:false});f.find("* .close").click(function(){var a=c.find(".slide_mainmask");a.removeClass("videoon");c.data("currentSlide").animate({top:"0px"},{duration:600,queue:false});f.animate({top:0-d.height+"px"},{duration:600,queue:false});setTimeout(function(){f.remove()},600)})})})}})}function d(a,b){for(var c=b.preloadedSlides;c<b.maxitem;c++){e(a,b,c)}}function c(b,c){b.find("iframe").attr("frameborder",0);b.find("ul").wrap('<div class="slide_mainmask" style="z-index:10;position:absolute;top:'+(c.padtop+1)+"px;left:"+(c.padleft+1)+"px;width:"+c.width+"px;height:"+c.height+'px;overflow:hidden"></div>');b.find("ul .slide_mainmask").css({opacity:"0.0"});c.maxitem=0;b.find("ul >li").each(function(b){c.maxitem=c.maxitem+1;var d=a(this);var e=d.find("img:first");e.data("src",e.attr("src"));e.attr("src","")});for(var d=0;d<c.preloadedSlides;d++){e(b,c,d)}}a.fn.extend({kenburn:function(e){var k={width:876,height:300,thumbWidth:90,thumbHeight:50,thumbAmount:6,thumbSpaces:4,thumbPadding:4,thumbStyle:"bullet",bulletXOffset:0,bulletYOffset:0,shadow:"true",timer:2e3,touchenabled:"on",pauseOnRollOverThumbs:"off",pauseOnRollOverMain:"on",preloadedSlides:50,googleFonts:"PT+Sans+Narrow:400,700",googleFontJS:"http://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",debug:"no"};e=a.extend({},a.fn.kenburn.defaults,e);WebFontConfig={google:{families:[e.googleFonts]},active:function(){jQuery("body").data("googlefonts","loaded")},inactive:function(){jQuery("body").data("googlefonts","loaded")}};return this.each(function(){var k=e;if(k.bulletXOffset==b)k.bulletXOffset=0;if(k.bulletYOffset==b)k.bulletYOffset=0;if(k.googleFonts!=b&&k.googleFonts.length>0){var l=document.createElement("script");l.src=k.googleFontJS;l.type="text/javascript";l.async="true";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(l,n);jQuery("body").data("googlefonts","wait")}else{jQuery("body").data("googlefonts","loaded")}k.savedTimer=k.timer;var p=a(this);if(k.debug==="on")a("body").append('<div class="khinfo" style="background:#fff;color:#000;width:300px;height:250px;position:fixed;left:10px;top:10px;"></div>');p.css({width:k.width+"px",height:k.height+"px"});p.append('<div class="kenburn-preloader"></div>');a("body").find(".khinfo").html("Start Slider");f(p,k);a("body").find(".khinfo").html("Prepared Container");c(p,k);a("body").find(".khinfo").html("Prepared Preloaded Slides");g(p,k);a("body").find(".khinfo").html("Prepared Shadows");a("body").find(".khinfo").html("Waiting for Images...");k.loadedImages=0;p.waitForImages(function(){a("body").find(".khinfo").html("Preloaded Images has been loaded");var c=setInterval(function(){a("body").find(".khinfo").html("Waiting for Google Fonts");if(a("body").data("googlefonts")!=b&&a("body").data("googlefonts")=="loaded"){if(k.thumbStyle=="image"||k.thumbStyle=="both"||k.thumbStyle=="thumb")h(p,k);if(k.thumbStyle=="bullet"||k.thumbStyle=="both")i(p,k);a("body").find(".khinfo").html("Google Fonts are here");clearInterval(c);j(p,k);a("body").find(".khinfo").html("Rotation Started");d(p,k)}},10)},function(){a("body").find(".khinfo").html(k.loadedImages+". Image has been Loaded");k.loadedImages=k.loadedImages+1});o(p,k);if(k.touchenabled=="on")p.swipe({data:p,swipeLeft:function(){var a=p.data("currentSlide");if(a.index()<k.maxitem-1){var b=p.find("ul li:eq("+(a.index()+1)+")")}else{var b=p.find("ul li:first")}m(a,b,p,k)},swipeRight:function(){var a=p.data("currentSlide");if(a.index()>0){var b=p.find("ul li:eq("+(a.index()-1)+")")}else{var b=p.find("ul li:eq("+(k.maxitem-1)+")")}m(a,b,p,k)},allowPageScroll:"auto"})})}})})(jQuery)